{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/alkhastvatsaev/Desktop/COURSES/hopla/app/lib/firebase.ts"],"sourcesContent":["\nimport { initializeApp } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\nexport const storage = getStorage(app);\n"],"names":[],"mappings":";;;;;;;;AAOU;AANV;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,aAAa;AACf;AAEA,sBAAsB;AACtB,MAAM,MAAM,IAAA,oLAAa,EAAC;AACnB,MAAM,OAAO,IAAA,wKAAO,EAAC;AACrB,MAAM,KAAK,IAAA,kLAAY,EAAC;AACxB,MAAM,UAAU,IAAA,8KAAU,EAAC"}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/alkhastvatsaev/Desktop/COURSES/hopla/app/components/SupportChat.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { usePathname } from 'next/navigation';\nimport { MessageCircle, Send, X, Headphones } from 'lucide-react';\nimport { db } from '../lib/firebase'; // Ensure firebase is initialized\nimport { collection, addDoc, query, where, onSnapshot, orderBy, serverTimestamp } from 'firebase/firestore';\n\nexport default function SupportChat() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [messages, setMessages] = useState<any[]>([]);\n  const [input, setInput] = useState('');\n  const [userId, setUserId] = useState<string | null>(null);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const pathname = usePathname();\n\n  const isTracking = pathname?.includes('/tracking/');\n\n  const positionStyle: React.CSSProperties = isTracking \n    ? { top: '20px', right: '80px', bottom: 'auto' }\n    : { bottom: '40px', right: '40px', top: 'auto' };\n\n  useEffect(() => {\n    // Generate or retrieve a consistent user ID for the chat session\n    let storedId = localStorage.getItem('hopla_chat_user_id');\n    if (!storedId) {\n      storedId = `user_${Math.random().toString(36).substr(2, 9)}`;\n      localStorage.setItem('hopla_chat_user_id', storedId);\n    }\n    setUserId(storedId);\n  }, []);\n\n  useEffect(() => {\n    if (!userId || !isOpen) return;\n\n    // Listen to messages for this user\n    const q = query(\n      collection(db, 'support_messages'),\n      where('conversationId', '==', userId), // Simple conversation grouping by user ID\n      orderBy('createdAt', 'asc')\n    );\n\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const msgs = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setMessages(msgs);\n      scrollToBottom();\n    });\n\n    return () => unsubscribe();\n  }, [userId, isOpen]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const sendMessage = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!input.trim() || !userId) return;\n\n    try {\n      await addDoc(collection(db, 'support_messages'), {\n        text: input,\n        sender: 'user',\n        conversationId: userId,\n        createdAt: serverTimestamp(),\n        read: false\n      });\n      setInput('');\n    } catch (error) {\n      console.error(\"Error sending message: \", error);\n    }\n  };\n\n  if (!isOpen) {\n    return (\n      <button \n        onClick={() => setIsOpen(true)}\n        className=\"hover-scale\"\n        style={{\n          position: 'fixed', \n          ...positionStyle,\n          width: '50px', height: '50px', borderRadius: '50%',\n          background: 'rgba(255, 255, 255, 0.95)',\n          backdropFilter: 'blur(20px)',\n          WebkitBackdropFilter: 'blur(20px)',\n          color: '#007AFF',\n          display: 'flex', alignItems: 'center', justifyContent: 'center',\n          boxShadow: '0 8px 30px rgba(0,0,0,0.1)',\n          border: '1px solid rgba(255,255,255,0.4)', \n          cursor: 'pointer', zIndex: 10000,\n          transition: 'transform 0.2s'\n        }}>\n        <MessageCircle size={24} strokeWidth={2} />\n      </button>\n    );\n  }\n\n  return (\n    <div className=\"animate-enter\" style={{\n      position: 'fixed', \n      ...positionStyle,\n      width: '350px', maxHeight: '500px', height: '80vh',\n      background: 'white', borderRadius: '24px',\n      boxShadow: '0 20px 60px rgba(0,0,0,0.15)',\n      display: 'flex', flexDirection: 'column',\n      zIndex: 10001, overflow: 'hidden', border: '1px solid rgba(0,0,0,0.05)'\n    }}>\n      {/* Header */}\n      <div style={{\n        padding: '16px', background: '#007AFF', color: 'white',\n        display: 'flex', justifyContent: 'space-between', alignItems: 'center'\n      }}>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n          <div style={{ width: '8px', height: '8px', background: '#34c759', borderRadius: '50%' }}></div>\n          <span style={{ fontWeight: '600' }}>Support Hopla</span>\n        </div>\n        <button onClick={() => setIsOpen(false)} style={{ background: 'none', border: 'none', color: 'white', cursor: 'pointer' }}>\n          <X size={20} />\n        </button>\n      </div>\n\n      {/* Messages */}\n      <div style={{ flex: 1, padding: '16px', overflowY: 'auto', background: '#f5f5f7', display: 'flex', flexDirection: 'column', gap: '10px' }}>\n        {/* Empty state removed */}\n        {messages.map((msg) => (\n          <div key={msg.id} style={{\n            alignSelf: msg.sender === 'user' ? 'flex-end' : 'flex-start',\n            maxWidth: '80%',\n            background: msg.sender === 'user' ? '#007AFF' : 'white',\n            color: msg.sender === 'user' ? 'white' : '#1d1d1f',\n            padding: '10px 14px', borderRadius: '18px',\n            fontSize: '14px', boxShadow: '0 1px 2px rgba(0,0,0,0.05)',\n            borderBottomRightRadius: msg.sender === 'user' ? '4px' : '18px',\n            borderBottomLeftRadius: msg.sender === 'user' ? '18px' : '4px'\n          }}>\n            {msg.text}\n          </div>\n        ))}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input */}\n      <form onSubmit={sendMessage} style={{ padding: '12px', background: 'white', borderTop: '1px solid #f2f2f7', display: 'flex', gap: '8px' }}>\n        <input \n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          placeholder=\"Ã‰crivez votre message...\"\n          style={{\n            flex: 1, padding: '10px 16px', borderRadius: '20px',\n            border: '1px solid #e5e5ea', outline: 'none', fontSize: '14px'\n          }}\n        />\n        <button type=\"submit\" disabled={!input.trim()} style={{\n          background: input.trim() ? '#007AFF' : '#d2d2d7', color: 'white', \n          width: '36px', height: '36px', borderRadius: '50%', border: 'none',\n          display: 'flex', alignItems: 'center', justifyContent: 'center', cursor: 'pointer', transition: 'background 0.2s'\n        }}>\n          <Send size={16} />\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["file:///Users/alkhastvatsaev/Desktop/COURSES/hopla/app/components/AuthProvider.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useEffect, useMemo, useState } from 'react';\nimport { onAuthStateChanged, signOut, type User } from 'firebase/auth';\nimport { auth } from '../lib/firebase';\n\ntype AuthContextValue = {\n  user: User | null;\n  loading: boolean;\n  logout: () => Promise<void>;\n};\n\nconst AuthContext = createContext<AuthContextValue | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const unsub = onAuthStateChanged(auth, (u) => {\n      setUser(u);\n      setLoading(false);\n    });\n    return () => unsub();\n  }, []);\n\n  const value = useMemo<AuthContextValue>(\n    () => ({\n      user,\n      loading,\n      logout: () => signOut(auth),\n    }),\n    [user, loading],\n  );\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport function useAuth() {\n  const ctx = useContext(AuthContext);\n  if (!ctx) throw new Error('useAuth must be used within AuthProvider');\n  return ctx;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AACA;;;AAJA;;;;AAYA,MAAM,4BAAc,IAAA,8KAAa,EAA+B;AAEzD,SAAS,aAAa,EAAE,QAAQ,EAAiC;;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;kCAAC;YACR,MAAM,QAAQ,IAAA,mLAAkB,EAAC,iIAAI;gDAAE,CAAC;oBACtC,QAAQ;oBACR,WAAW;gBACb;;YACA;0CAAO,IAAM;;QACf;iCAAG,EAAE;IAEL,MAAM,QAAQ,IAAA,wKAAO;uCACnB,IAAM,CAAC;gBACL;gBACA;gBACA,MAAM;mDAAE,IAAM,IAAA,wKAAO,EAAC,iIAAI;;YAC5B,CAAC;sCACD;QAAC;QAAM;KAAQ;IAGjB,qBAAO,6LAAC,YAAY,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC9C;GAtBgB;KAAA;AAwBT,SAAS;;IACd,MAAM,MAAM,IAAA,2KAAU,EAAC;IACvB,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,OAAO;AACT;IAJgB"}}]
}